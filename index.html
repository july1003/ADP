<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ADP Study</title>
    <style>
      body {
        font-family: 'Malgun Gothic', 'ë§‘ì€ ê³ ë”•', Arial, sans-serif;
        margin: 0;
        padding: 0;
        background: #fff;
        color: #222;
      }

      /* ì¤‘ì•™ ì •ë ¬ ì»¨í…Œì´ë„ˆ */
      .container {
        max-width: 60%;
        margin: 0 auto 24px;
        padding: 0 20px;
      }

      h1 {
        margin: 0 0 20px;
        font-size: 30px;
        text-align: center;
      }
      .header-banner {
        position: relative;
        background-image: url('./images/header-bg.jpg'); /* ì´ë¯¸ì§€ íŒŒì¼ */
        background-size: cover;
        background-position: center;
        border-radius: 10px;
        padding: 28px 20px;
        margin-bottom: 24px;
        overflow: hidden;
      }

      .header-banner::before {
        content: '';
        position: absolute;
        inset: 0;
        background: rgba(255, 255, 255, 0.75); /* ê°€ë…ì„± í™•ë³´ */
      }

      .page-title {
        position: relative;
        text-align: center;
        font-size: 30px;
        margin: 0;
      }

      /* Recent section */
      .recent-box {
        border: 2px solid #007acc;
        padding: 12px;
        margin-bottom: 18px;
        background-color: #f9fcff;
        border-radius: 6px;
      }

      /* Accordion header */
      .section-title {
        cursor: pointer;
        margin-top: 18px;
        padding: 10px 12px;
        background-color: #f2f2f2;
        border: 1px solid #ccc;
        font-size: 18px;
        user-select: none;

        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 10px;

        border-radius: 6px;
      }

      .title-left {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        min-width: 0;
      }

      .chevron {
        display: inline-block;
        width: 18px;
        text-align: center;
        font-weight: 700;
        flex: 0 0 auto;
      }

      .title-text {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .count-badge {
        font-size: 13px;
        color: #555;
        background: #fff;
        border: 1px solid #ddd;
        padding: 2px 8px;
        border-radius: 999px;
        flex: 0 0 auto;
      }

      /* Accordion content */
      .section-content {
        border: 1px solid #ccc;
        border-top: none;
        padding: 10px 12px;
        border-radius: 0 0 6px 6px;
      }

      /* ë¦¬ìŠ¤íŠ¸ */
      ul {
        list-style-type: disc;
        padding-left: 22px;
        margin: 0;
      }

      li {
        min-height: 32px;
        line-height: 40px;
      }

      a {
        text-decoration: none;
        color: #333;
      }

      a:hover {
        text-decoration: underline;
        color: #007acc;
      }

      /* ëª¨ë°”ì¼: ë” ì»´íŒ©íŠ¸ */
      @media (max-width: 600px) {
        .section-title {
          font-size: 16px;
          padding: 10px;
        }
        li {
          line-height: 30px;
        }
      }
    </style>
  </head>

  <body>
    <div class="container">
      <div class="header-banner">
        <h1>2026 ADP ë°ì´í„°ë¶„ì„ì „ë¬¸ê°€ í•„ê¸° ëŒ€ë¹„</h1>
      </div>

      <!-- ìµœê·¼ ë³¸ ë¬¸ì œ -->
      <div class="recent-box">
        <strong>ğŸ“Œ ìµœê·¼ ë³¸ ë¬¸ì œ</strong>
        <ul id="recentList"></ul>
      </div>

      <!-- ì˜ˆìƒë¬¸ì œ -->
      <div class="section-title" data-key="pred" onclick="toggleSection(this)">
        <span class="title-left">
          <span class="chevron" aria-hidden="true">â–¼</span>
          <span class="title-text">ğŸ“˜ ì˜ˆìƒë¬¸ì œ</span>
        </span>
        <span class="count-badge" data-count-for="pred">(0)</span>
      </div>
      <div class="section-content" data-key="pred">
        <ul>
          <li>
            <a href="PredEaxm_1Part.html" onclick="saveRecent(this)"
              >ì˜ˆìƒë¬¸ì œ_1Part</a
            >
          </li>
          <li>
            <a href="PredEaxm_2Part_chapt1.html" onclick="saveRecent(this)"
              >ì˜ˆìƒë¬¸ì œ_2Part_chapt1</a
            >
          </li>
          <li>
            <a href="PredEaxm_2Part_chapt2.html" onclick="saveRecent(this)"
              >ì˜ˆìƒë¬¸ì œ_2Part_chapt2</a
            >
          </li>
          <li>
            <a href="PredEaxm_3Part.html" onclick="saveRecent(this)"
              >ì˜ˆìƒë¬¸ì œ_3Part</a
            >
          </li>
          <li>
            <a href="PredEaxm_4Part_chapt1.html" onclick="saveRecent(this)"
              >ì˜ˆìƒë¬¸ì œ_4Part_chapt1</a
            >
          </li>
          <li>
            <a href="PredEaxm_4Part_chapt2.html" onclick="saveRecent(this)"
              >ì˜ˆìƒë¬¸ì œ_4Part_chapt2</a
            >
          </li>
          <li>
            <a href="PredEaxm_4Part_chapt3.html" onclick="saveRecent(this)"
              >ì˜ˆìƒë¬¸ì œ_4Part_chapt3</a
            >
          </li>
          <li>
            <a href="PredEaxm_4Part_chapt4.html" onclick="saveRecent(this)"
              >ì˜ˆìƒë¬¸ì œ_4Part_chapt4</a
            >
          </li>
          <li>
            <a href="PredEaxm_4Part_chapt5.html" onclick="saveRecent(this)"
              >ì˜ˆìƒë¬¸ì œ_4Part_chapt5</a
            >
          </li>
          <li>
            <a href="PredEaxm_4Part_chapt6.html" onclick="saveRecent(this)"
              >ì˜ˆìƒë¬¸ì œ_4Part_chapt6</a
            >
          </li>
          <li>
            <a href="PredEaxm_5Part_chapt1.html" onclick="saveRecent(this)"
              >ì˜ˆìƒë¬¸ì œ_5Part_chapt1</a
            >
          </li>
          <li>
            <a href="PredEaxm_5Part_chapt2.html" onclick="saveRecent(this)"
              >ì˜ˆìƒë¬¸ì œ_5Part_chapt2</a
            >
          </li>
          <li>
            <a href="PredEaxm_5Part_chapt3.html" onclick="saveRecent(this)"
              >ì˜ˆìƒë¬¸ì œ_5Part_chapt3</a
            >
          </li>
        </ul>
      </div>

      <!-- ê¸°ì¶œë¬¸ì œ -->
      <div class="section-title" data-key="prev" onclick="toggleSection(this)">
        <span class="title-left">
          <span class="chevron" aria-hidden="true">â–¼</span>
          <span class="title-text">ğŸ“• ê¸°ì¶œë¬¸ì œ</span>
        </span>
        <span class="count-badge" data-count-for="prev">(0)</span>
      </div>
      <div class="section-content" data-key="prev">
        <ul>
          <li>
            <a href="PrevEaxm_25.html" onclick="saveRecent(this)"
              >ê¸°ì¶œë¬¸ì œ_25</a
            >
          </li>
          <li>
            <a href="PrevEaxm_27-P.html" onclick="saveRecent(this)"
              >ê¸°ì¶œë¬¸ì œ_27-P</a
            >
          </li>
          <li>
            <a href="PrevEaxm_27.html" onclick="saveRecent(this)"
              >ê¸°ì¶œë¬¸ì œ_27</a
            >
          </li>
          <li>
            <a href="PrevEaxm_28.html" onclick="saveRecent(this)"
              >ê¸°ì¶œë¬¸ì œ_28</a
            >
          </li>
          <li>
            <a href="PrevEaxm_29-D.html" onclick="saveRecent(this)"
              >ê¸°ì¶œë¬¸ì œ_29-D</a
            >
          </li>
          <li>
            <a href="PrevEaxm_29.html" onclick="saveRecent(this)"
              >ê¸°ì¶œë¬¸ì œ_29</a
            >
          </li>
          <li>
            <a href="PrevEaxm_34-A.html" onclick="saveRecent(this)"
              >ê¸°ì¶œë¬¸ì œ_34-A</a
            >
          </li>
          <li>
            <a href="PrevEaxm_34.html" onclick="saveRecent(this)"
              >ê¸°ì¶œë¬¸ì œ_34</a
            >
          </li>
        </ul>
      </div>

      <!-- ëª¨ì˜ê³ ì‚¬ -->
      <div class="section-title" data-key="mock" onclick="toggleSection(this)">
        <span class="title-left">
          <span class="chevron" aria-hidden="true">â–¼</span>
          <span class="title-text">ğŸ“ ëª¨ì˜ê³ ì‚¬</span>
        </span>
        <span class="count-badge" data-count-for="mock">(0)</span>
      </div>
      <div class="section-content" data-key="mock">
        <ul>
          <li>
            <a href="mock01.html" onclick="saveRecent(this)">ëª¨ì˜ê³ ì‚¬ 1</a>
          </li>
          <li>
            <a href="mock02.html" onclick="saveRecent(this)">ëª¨ì˜ê³ ì‚¬ 2</a>
          </li>
          <li>
            <a href="mock03.html" onclick="saveRecent(this)">ëª¨ì˜ê³ ì‚¬ 3</a>
          </li>
        </ul>
      </div>

      <div class="section-title" data-key="md" onclick="toggleSection(this)">
        <span class="title-left">
          <span class="chevron" aria-hidden="true">â–¼</span>
          <span class="title-text">ğŸ“˜ í•™ìŠµ ë…¸íŠ¸ (Markdown) </span>
        </span>
        <span class="count-badge" data-count-for="mock">(0)</span>
      </div>
      <div class="section-content" data-key="md">
        <ol>
          <li><a href="ADP.md" target="_blank">ADP.md</a></li>
          <li><a href="ADP_Anal.md" target="_blank">ADP_Anal.md</a></li>
          <li>
            <a href="ADP_DQ_Expect.md" target="_blank">ADP_DQ_Expect.md</a>
          </li>
          <li><a href="ADP_mock.md" target="_blank">ADP_mock.md</a></li>
          <li><a href="ADP_mock2.md" target="_blank">ADP_mock2.md</a></li>
          <li>
            <a href="ADP_prepare_gpt.md" target="_blank">ADP_prepare_gpt.md</a>
          </li>
          <li>
            <a href="ADP_summary_2parts.md" target="_blank"
              >ADP_summary_2parts.md</a
            >
          </li>
          <li>
            <a href="ADP_summary_all.md" target="_blank">ADP_summary_all.md</a>
          </li>
          <li>
            <a href="ADP_WrongPattenNote.md" target="_blank"
              >ADP_WrongPattenNote.md</a
            >
          </li>
          <li>
            <a
              href="ADP_%ED%95%84%EA%B8%B0%EA%B5%90%EC%9E%AC.md"
              target="_blank"
              >ADP_í•„ê¸°êµì¬.md</a
            >
          </li>
          <li><a href="note.md" target="_blank">note.md</a></li>
        </ol>
      </div>
    </div>

    <script>
      // =========================
      // ìƒíƒœ ì €ì¥ í‚¤
      // =========================
      const STORAGE_KEY_ACCORDION = 'adpAccordionState';
      const STORAGE_KEY_RECENT = 'recentItems';

      // =========================
      // ë‚´ë¶€ ìœ í‹¸: ì„¹ì…˜ ì°¾ê¸°
      // =========================
      function getContentByKey(key) {
        return document.querySelector(`.section-content[data-key="${key}"]`);
      }

      function getTitleByKey(key) {
        return document.querySelector(`.section-title[data-key="${key}"]`);
      }

      function setOpenStateByKey(key, shouldOpen) {
        const contentEl = getContentByKey(key);
        const titleEl = getTitleByKey(key);
        const chevronEl = titleEl.querySelector('.chevron');

        contentEl.style.display = shouldOpen ? 'block' : 'none';
        contentEl.dataset.open = shouldOpen ? 'true' : 'false';
        chevronEl.textContent = shouldOpen ? 'â–¼' : 'â–¶';
      }

      // =========================
      // Accordion: ì‹±ê¸€ ì˜¤í”ˆ ëª¨ë“œ + ì•„ì´ì½˜ + ìƒíƒœì €ì¥
      // =========================
      function toggleSection(titleEl) {
        const key = titleEl.dataset.key;
        const contentEl = getContentByKey(key);
        const isOpen = contentEl.dataset.open === 'true';

        // ì—´ë ¤ê³  í•˜ëŠ” ê²½ìš°: ë‹¤ë¥¸ ì„¹ì…˜ì€ ë‹«ëŠ”ë‹¤ (ì‹±ê¸€ ì˜¤í”ˆ)
        if (!isOpen) {
          document.querySelectorAll('.section-content').forEach((other) => {
            const otherKey = other.dataset.key;
            if (otherKey !== key) setOpenStateByKey(otherKey, false);
          });
          setOpenStateByKey(key, true);
        } else {
          // ë‹«ê¸°
          setOpenStateByKey(key, false);
        }

        saveAccordionState();
      }

      function saveAccordionState() {
        const state = {};
        document.querySelectorAll('.section-content').forEach((content) => {
          const key = content.dataset.key;
          state[key] = content.dataset.open === 'true';
        });
        localStorage.setItem(STORAGE_KEY_ACCORDION, JSON.stringify(state));
      }

      function loadAccordionState() {
        const raw = localStorage.getItem(STORAGE_KEY_ACCORDION);
        if (!raw) return null;
        try {
          return JSON.parse(raw);
        } catch (e) {
          return null;
        }
      }

      // =========================
      // ì„¹ì…˜ ì¹´ìš´íŠ¸ ìë™ ê³„ì‚° (li ê°œìˆ˜)
      // =========================
      function updateSectionCounts() {
        document.querySelectorAll('.section-content').forEach((content) => {
          const key = content.dataset.key;
          const count = content.querySelectorAll('li').length;
          const badge = document.querySelector(
            `.count-badge[data-count-for="${key}"]`
          );
          if (badge) badge.textContent = `(${count})`;
        });
      }

      // =========================
      // ëª¨ë°”ì¼ ê¸°ë³¸ ì ‘í˜ / ë°ìŠ¤í¬í†± ê¸°ë³¸ í¼ì¹¨
      // ë‹¨, ì €ì¥ëœ ìƒíƒœê°€ ìˆìœ¼ë©´ ì €ì¥ ìƒíƒœ ìš°ì„ 
      // =========================
      function initAccordion() {
        const saved = loadAccordionState();
        const isMobile = window.matchMedia('(max-width: 600px)').matches;

        // savedê°€ ìˆìœ¼ë©´ ê·¸ëŒ€ë¡œ ë³µì›
        if (saved) {
          Object.keys(saved).forEach((key) =>
            setOpenStateByKey(key, !!saved[key])
          );
          return;
        }

        // savedê°€ ì—†ìœ¼ë©´ ê¸°ë³¸ê°’ ì ìš©:
        // - ëª¨ë°”ì¼: ëª¨ë‘ ë‹«í˜
        // - ë°ìŠ¤í¬í†±: "ì²« ì„¹ì…˜ë§Œ ì—´ê¸°" (ì‹±ê¸€ ì˜¤í”ˆ ëª¨ë“œì™€ ì¼ê´€)
        const keys = Array.from(
          document.querySelectorAll('.section-title')
        ).map((t) => t.dataset.key);

        if (isMobile) {
          keys.forEach((k) => setOpenStateByKey(k, false));
        } else {
          keys.forEach((k, i) => setOpenStateByKey(k, i === 0));
        }

        saveAccordionState();
      }

      // =========================
      // Recent items
      // - ì„¹ì…˜ ë‚´ ë§í¬ í´ë¦­: ê¸°ì¡´ onclick(saveRecent(this)) ìœ ì§€
      // - "ìµœê·¼ ë³¸ ë¬¸ì œ" ëª©ë¡ ë§í¬ í´ë¦­ ì‹œì—ë„ ì €ì¥ë˜ë„ë¡ ìœ„ì„ ì²˜ë¦¬
      // =========================
      function saveRecent(linkEl) {
        const item = {
          name: linkEl.innerText,
          href: linkEl.getAttribute('href'),
        };

        let recent = [];
        try {
          recent = JSON.parse(localStorage.getItem(STORAGE_KEY_RECENT)) || [];
        } catch (e) {
          recent = [];
        }

        recent = recent.filter((r) => r.href !== item.href);
        recent.unshift(item);
        recent = recent.slice(0, 3);

        localStorage.setItem(STORAGE_KEY_RECENT, JSON.stringify(recent));
      }

      function loadRecent() {
        let recent = [];
        try {
          recent = JSON.parse(localStorage.getItem(STORAGE_KEY_RECENT)) || [];
        } catch (e) {
          recent = [];
        }

        const ul = document.getElementById('recentList');
        ul.innerHTML = '';

        recent.forEach((r) => {
          const li = document.createElement('li');
          // ìµœê·¼ ëª©ë¡ë„ í´ë¦­ ì‹œ saveRecent ë˜ë„ë¡ data-recent-link ë¶€ì—¬
          li.innerHTML = `<a href="${r.href}" data-recent-link="1">${r.name}</a>`;
          ul.appendChild(li);
        });
      }

      // "ìµœê·¼ ë³¸ ë¬¸ì œ" ì˜ì—­ í´ë¦­ ìœ„ì„: ë§í¬ í´ë¦­ ì‹œ ì €ì¥
      function bindRecentClickDelegation() {
        const ul = document.getElementById('recentList');
        ul.addEventListener('click', function (e) {
          const a = e.target.closest('a');
          if (!a) return;
          // ìµœê·¼ ëª©ë¡ ë§í¬ë©´ ì €ì¥ í›„ ê·¸ëŒ€ë¡œ ì´ë™
          if (a.dataset.recentLink === '1') {
            saveRecent(a);
          }
        });
      }

      // =========================
      // ì´ˆê¸° ì‹¤í–‰
      // =========================
      updateSectionCounts();
      initAccordion();
      loadRecent();
      bindRecentClickDelegation();
    </script>
  </body>
</html>
